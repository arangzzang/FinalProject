<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="enterprise">
	<resultMap type="ent" id="entMap">
		<result column="ent_no" property="entNo"/>
		<result column="ent_email" property="entEmail"/>
		<result column="ent_pw" property="entPw"/>
		<result column="ent_name" property="entName"/>
		<result column="ent_business_no" property="entBusinessNo"/>
		<result column="ent_logo" property="entLogo"/>
		<result column="ent_category1" property="entCategory1"/>
		<result column="ent_category2" property="entCategory2"/>
		<result column="rep_name" property="repName"/>
		<result column="rep_phone" property="repPhone"/>
		<result column="ent_site" property="entSite"/>
		<result column="res_name" property="resName"/>
		<result column="res_gender" property="resGender"/>
		<result column="res_birth" property="resBirth"/>
		<result column="res_opencheck" property="resOpencheck"/> 
		<result column="mem_no" property="memNo"/>
	</resultMap>

	<insert id="enrollEnter" parameterType="ent">
		insert into enterprise values(
									seq_ent_no.nextval,
									#{entEmail},
									#{entPw},
									#{entName},
									#{entBusinessNo},
									#{entLogo},
									#{entCategory1},
									#{entCategory2},
									#{repName},
									#{repPhone},
									default,
									${entSite}
									)
	</insert>
		<insert id="insertApplyAd" parameterType="ad">
			INSERT INTO RECRUITMENT VALUES (
			seq_rec_no.nextval,
			#{ent_no},
			#{rec_title},
			#{rec_contents},
			#{rec_file1},
			#{rec_file2},
			#{rec_startdate},
			#{rec_enddate},
			#{rec_salary},
			#{rec_info},
			#{rec_prefer},
			#{rec_welfare},
			#{rec_qualification},
			#{rec_people},
			#{rec_career},
			#{rec_order},
			#{rec_type},
			#{rec_other},
			#{rec_category}
			)
	</insert>
	<select id="findOneEnterprise" parameterType="int" resultMap="entMap">
		SELECT * FROM ENTERPRISE WHERE ENT_NO=#{memNo}
	
	</select>

	<select id="selectSupport" resultType="support" >
	SELECT S.*,RES_NAME , RES_GENDER , RES_BIRTH, RES_OPENCHECK
		FROM support S
		JOIN RESUME R ON (R.MEM_NO =S.MEM_NO )
	</select>
	
	<select id ="selectCount" resultType="_int">
		SELECT COUNT(*) FROM SUPPORT
	</select>
</mapper>
